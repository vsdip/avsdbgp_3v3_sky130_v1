v {xschem version=2.9.9 file_version=1.2 }
G {}
K {}
V {}
S {}
E {}
T {start-up circuit} 370 -490 0 0 0.4 0.4 {}
T {bandgap reference circuit} 580 -220 0 0 0.6 0.6 {}
N 710 -770 790 -770 { lab=VbiasP}
N 650 -770 670 -770 { lab=VDD}
N 830 -770 850 -770 { lab=VDD}
N 780 -770 780 -730 { lab=VbiasP}
N 670 -430 670 -420 { lab=GND}
N 630 -420 670 -420 { lab=GND}
N 630 -460 630 -420 { lab=GND}
N 670 -460 690 -460 { lab=GND}
N 620 -270 620 -260 { lab=GND}
N 580 -300 580 -260 { lab=GND}
N 580 -260 620 -260 { lab=GND}
N 990 -770 1010 -770 { lab=VDD}
N 620 -300 630 -300 { lab=GND}
N 690 -340 700 -340 { lab=GND}
N 650 -340 650 -300 { lab=GND}
N 650 -300 690 -300 { lab=GND}
N 690 -310 690 -300 { lab=GND}
N 760 -270 760 -260 { lab=GND}
N 720 -300 720 -260 { lab=GND}
N 720 -260 760 -260 { lab=GND}
N 760 -300 770 -300 { lab=GND}
N 830 -340 840 -340 { lab=GND}
N 790 -340 790 -300 { lab=GND}
N 790 -300 830 -300 { lab=GND}
N 830 -310 830 -300 { lab=GND}
N 900 -270 900 -260 { lab=GND}
N 860 -300 860 -260 { lab=GND}
N 860 -260 900 -260 { lab=GND}
N 900 -300 910 -300 { lab=GND}
N 970 -340 980 -340 { lab=GND}
N 930 -340 930 -300 { lab=GND}
N 930 -300 970 -300 { lab=GND}
N 970 -310 970 -300 { lab=GND}
N 1040 -270 1040 -260 { lab=GND}
N 1000 -300 1000 -260 { lab=GND}
N 1000 -260 1040 -260 { lab=GND}
N 1040 -300 1050 -300 { lab=GND}
N 1110 -340 1120 -340 { lab=GND}
N 1070 -340 1070 -300 { lab=GND}
N 1070 -300 1110 -300 { lab=GND}
N 1110 -310 1110 -300 { lab=GND}
N 690 -380 690 -370 { lab=#net1}
N 690 -380 830 -380 { lab=#net1}
N 760 -380 760 -330 { lab=#net1}
N 830 -380 970 -380 { lab=#net1}
N 970 -380 970 -370 { lab=#net1}
N 900 -380 900 -330 { lab=#net1}
N 620 -380 620 -330 { lab=#net1}
N 620 -380 690 -380 { lab=#net1}
N 1040 -380 1040 -330 { lab=#net1}
N 970 -380 1040 -380 { lab=#net1}
N 1110 -380 1110 -370 { lab=#net1}
N 1040 -380 1110 -380 { lab=#net1}
N 780 -730 830 -730 { lab=VbiasP}
N 770 -770 770 -720 { lab=VbiasP}
N 770 -720 950 -720 { lab=VbiasP}
N 950 -770 950 -720 { lab=VbiasP}
N 380 -570 400 -570 { lab=GND}
N 670 -540 670 -490 { lab=Vleft_branch}
N 670 -570 690 -570 { lab=GND}
N 670 -570 690 -570 { lab=GND}
N 830 -570 850 -570 { lab=GND}
N 830 -430 830 -380 { lab=#net1}
N 830 -380 830 -370 { lab=#net1}
N 650 -670 670 -670 { lab=GND}
N 830 -670 850 -670 { lab=GND}
N 990 -670 1010 -670 { lab=GND}
N 710 -670 790 -670 { lab=VbiasN}
N 990 -600 1110 -600 { lab=Vbgp}
N 990 -600 990 -570 { lab=Vbgp}
N 670 -710 720 -710 { lab=VbiasN}
N 720 -710 720 -670 { lab=VbiasN}
N 670 -740 670 -710 { lab=VbiasN}
N 670 -710 670 -700 { lab=VbiasN}
N 830 -740 830 -730 { lab=VbiasP}
N 830 -730 830 -700 { lab=VbiasP}
N 990 -740 990 -700 { lab=#net2}
N 380 -770 400 -770 { lab=VDD}
N 670 -640 670 -600 { lab=#net3}
N 830 -640 830 -600 { lab=#net4}
N 990 -640 990 -600 { lab=Vbgp}
N 470 -670 490 -670 { lab=GND}
N 470 -640 470 -630 { lab=GND}
N 400 -540 400 -530 { lab=GND}
N 400 -810 400 -800 { lab=VDD}
N 990 -810 990 -800 { lab=VDD}
N 830 -810 830 -800 { lab=VDD}
N 670 -810 670 -800 { lab=VDD}
N 440 -770 440 -730 { lab=#net5}
N 400 -730 440 -730 { lab=#net5}
N 400 -740 400 -600 { lab=#net5}
N 400 -670 430 -670 { lab=#net5}
N 470 -730 470 -700 { lab=VbiasP}
N 440 -570 470 -570 { lab=VbiasN}
N 470 -570 600 -570 { lab=VbiasN}
N 600 -630 600 -570 { lab=VbiasN}
N 600 -630 740 -630 { lab=VbiasN}
N 740 -670 740 -630 { lab=VbiasN}
N 470 -730 740 -730 { lab=VbiasP}
N 740 -770 740 -730 { lab=VbiasP}
N 830 -540 830 -490 { lab=Vright_branch}
N 1110 -600 1110 -530 { lab=Vbgp}
N 1110 -470 1110 -420 { lab=GND}
N 990 -510 990 -490 { lab=#net6}
N 950 -460 950 -420 { lab=GND}
N 950 -420 990 -420 { lab=GND}
N 990 -430 990 -420 { lab=GND}
N 990 -460 1010 -460 { lab=GND}
C {xschem_sky130/sky130_fd_pr/nfet_g5v0d10v5.sym} 690 -670 0 1 {name=M1
L=5
W=15
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_g5v0d10v5
spiceprefix=X
}
C {xschem_sky130/sky130_fd_pr/nfet_g5v0d10v5.sym} 810 -670 0 0 {name=M2
L=5
W=15
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_g5v0d10v5
spiceprefix=X
}
C {code.sym} 390 -400 0 0 {name=commands only_toplevel=false value="
.lib "../../lib/models/sky130_tt_bgr.lib.spice" tt
.options savecurrents

*** plot vbgp with variation in supply voltage
*Vdd VDD GND 3.3
*V_en en GND 3.3
*.dc Vdd 2 4 0.1
*.control
*run
*print Vbgp
*plot V(Vbgp)
*.endc

*** plot vbgp with variation in temperature @3.3V
*Vdd VDD GND 3.3
*V_en en GND 3.3
*.dc temp -40 140 1
*.control
*run
*print V(Vbgp)
*plot V(Vbgp)
*.endc

*** plot voltage coefficient
*Vdd VDD GND 3.3
*V_en en GND 3.3
*.dc Vdd 2 4 0.1
*.control
*run
*plot deriv(V(Vbgp))
*.endc

*** plot temperature coefficient
*Vdd VDD GND 3.3
*V_en en GND 3.3
*.dc temp -40 140 1
*.control
*run
*plot deriv(V(Vbgp))/1.202344
*.endc

*** check start up circuit
V_en en GND 3.3
Vdd VDD GND PULSE(0 3.3 50us 200us 200us 600us 2000us 0)
.tran 1us 800us
.control
run
plot V(Vdd) V(Vbgp)
.endc

*** enable pin
*Vdd VDD GND 3.3
*V_en en GND PULSE(0 3.3 0 200us 200us 600us 2000us 0)
*.tran 1u 2000us
*.control
*run
*plot V(en)
*plot -I(VDD)
*.endc
"}
C {gnd.sym} 650 -670 0 1 {name=l13 lab=GND}
C {gnd.sym} 850 -670 0 0 {name=l18 lab=GND}
C {vdd.sym} 670 -810 0 0 {name=l3 lab=VDD}
C {vdd.sym} 830 -810 0 0 {name=l4 lab=VDD}
C {xschem_sky130/sky130_fd_pr/pfet_g5v0d10v5.sym} 690 -770 0 1 {name=M3
L=5
W=15
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_g5v0d10v5
spiceprefix=X
}
C {vdd.sym} 650 -770 0 0 {name=l16 lab=VDD}
C {vdd.sym} 850 -770 0 0 {name=l17 lab=VDD}
C {gnd.sym} 670 -420 0 0 {name=l1 lab=GND}
C {gnd.sym} 620 -260 0 0 {name=l2 lab=GND}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 650 -460 0 0 {name=Q1
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 600 -300 0 0 {name=Q2
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {lab_pin.sym} 670 -510 0 0 {name=l26 sig_type=std_logic lab=Vleft_branch}
C {vdd.sym} 990 -810 0 0 {name=l27 lab=VDD}
C {xschem_sky130/sky130_fd_pr/pfet_g5v0d10v5.sym} 970 -770 0 0 {name=M5
L=5
W=15
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_g5v0d10v5
spiceprefix=X
}
C {vdd.sym} 1010 -770 0 0 {name=l30 lab=VDD}
C {gnd.sym} 690 -460 0 0 {name=l21 lab=GND}
C {gnd.sym} 630 -300 0 0 {name=l24 lab=GND}
C {gnd.sym} 1010 -460 0 0 {name=l32 lab=GND}
C {gnd.sym} 690 -300 0 0 {name=l7 lab=GND}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 670 -340 0 0 {name=Q3
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {gnd.sym} 700 -340 0 0 {name=l8 lab=GND}
C {gnd.sym} 760 -260 0 0 {name=l9 lab=GND}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 740 -300 0 0 {name=Q4
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {gnd.sym} 770 -300 0 0 {name=l10 lab=GND}
C {gnd.sym} 830 -300 0 0 {name=l11 lab=GND}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 810 -340 0 0 {name=Q5
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {gnd.sym} 840 -340 0 0 {name=l12 lab=GND}
C {gnd.sym} 900 -260 0 0 {name=l14 lab=GND}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 880 -300 0 0 {name=Q6
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {gnd.sym} 910 -300 0 0 {name=l15 lab=GND}
C {gnd.sym} 970 -300 0 0 {name=l19 lab=GND}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 950 -340 0 0 {name=Q7
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {gnd.sym} 980 -340 0 0 {name=l20 lab=GND}
C {gnd.sym} 1040 -260 0 0 {name=l28 lab=GND}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 1020 -300 0 0 {name=Q8
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {gnd.sym} 1050 -300 0 0 {name=l33 lab=GND}
C {gnd.sym} 1110 -300 0 0 {name=l34 lab=GND}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 1090 -340 0 0 {name=Q9
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {gnd.sym} 1120 -340 0 0 {name=l35 lab=GND}
C {res.sym} 830 -460 0 0 {name=R1
value=50k
footprint=1206
device=resistor
m=1}
C {res.sym} 990 -540 0 0 {name=R2
value=463k
footprint=1206
device=resistor
m=1}
C {xschem_sky130/sky130_fd_pr/pnp_05v5.sym} 970 -460 0 0 {name=Q10
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {lab_pin.sym} 1110 -600 0 1 {name=l22 sig_type=std_logic lab=Vbgp}
C {lab_pin.sym} 830 -510 0 1 {name=l25 sig_type=std_logic lab=Vright_branch}
C {xschem_sky130/sky130_fd_pr/pfet_g5v0d10v5.sym} 810 -770 0 0 {name=M4
L=5
W=15
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_g5v0d10v5
spiceprefix=X
}
C {xschem_sky130/sky130_fd_pr/nfet_g5v0d10v5.sym} 420 -570 0 1 {name=M7
L=6
W=42
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_g5v0d10v5
spiceprefix=X
}
C {xschem_sky130/sky130_fd_pr/nfet_g5v0d10v5.sym} 450 -670 0 0 {name=M8
L=1
W=3
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_g5v0d10v5
spiceprefix=X
}
C {vdd.sym} 400 -810 0 0 {name=l31 lab=VDD}
C {gnd.sym} 400 -530 0 0 {name=l36 lab=GND}
C {gnd.sym} 470 -630 0 0 {name=l37 lab=GND}
C {gnd.sym} 380 -570 0 1 {name=l38 lab=GND}
C {gnd.sym} 490 -670 0 0 {name=l39 lab=GND}
C {res.sym} 1110 -500 0 0 {name=RLoad
value=100Meg
footprint=1206
device=resistor
m=1}
C {gnd.sym} 1110 -420 0 0 {name=l40 lab=GND}
C {gnd.sym} 990 -420 0 0 {name=l29 lab=GND}
C {lab_pin.sym} 500 -570 1 1 {name=l56 sig_type=std_logic lab=VbiasN}
C {lab_pin.sym} 500 -730 3 1 {name=l57 sig_type=std_logic lab=VbiasP}
C {xschem_sky130/sky130_fd_pr/nfet_g5v0d10v5.sym} 650 -570 0 0 {name=M9
L=5
W=12
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_g5v0d10v5
spiceprefix=X
}
C {gnd.sym} 690 -570 0 0 {name=l50 lab=GND}
C {vdd.sym} 630 -570 0 0 {name=l51 lab=en}
C {gnd.sym} 690 -570 0 0 {name=l52 lab=GND}
C {vdd.sym} 630 -570 0 0 {name=l53 lab=en}
C {xschem_sky130/sky130_fd_pr/nfet_g5v0d10v5.sym} 810 -570 0 0 {name=M10
L=5
W=12
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_g5v0d10v5
spiceprefix=X
}
C {vdd.sym} 790 -570 0 0 {name=l54 lab=en}
C {gnd.sym} 850 -570 0 0 {name=l58 lab=GND}
C {vdd.sym} 950 -670 0 0 {name=l59 lab=en}
C {gnd.sym} 1010 -670 0 0 {name=l60 lab=GND}
C {xschem_sky130/sky130_fd_pr/nfet_g5v0d10v5.sym} 970 -670 0 0 {name=M11
L=5
W=12
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_g5v0d10v5
spiceprefix=X
}
C {xschem_sky130/sky130_fd_pr/pfet_g5v0d10v5.sym} 420 -770 0 1 {name=M6
L=60
W=0.5
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_g5v0d10v5
spiceprefix=X
}
C {vdd.sym} 380 -770 0 0 {name=l5 lab=VDD}
